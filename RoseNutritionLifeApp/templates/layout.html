<!DOCTYPE html>
   <html>
   {% load static %}
   {%load crispy_forms_tags%}

   <head>
     <!-- Basic -->
     <meta charset="utf-8" />
     <meta http-equiv="X-UA-Compatible" content="IE=edge" />
     <!-- Mobile Metas -->
     <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
     <!-- Site Metas -->
     <meta name="keywords" content="" />
     <meta name="description" content="" />
     <meta name="author" content="" />
     <title>rosenutritionlife</title>
     
       <!-- bootstrap-->
       <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
     <!-- boostratp icons -->
     <!-- link file -->
     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    
     <!-- bootstrap core css -->
     <link rel="stylesheet" type="text/css" href="{% static '/css/bootstrap.css' %}" />
   
     <!-- fonts style -->
     <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700;900&display=swap" rel="stylesheet">
   
     <!--owl slider stylesheet -->
     <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css" />
   
     <!-- font awesome style -->
     {% comment %} <link href="{% static '/css/font-awesome.min.css' %}" rel="stylesheet" /> {% endcomment %}
     <!-- nice select -->
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-nice-select/1.1.0/css/nice-select.min.css" integrity="sha256-mLBIhmBvigTFWPSCtvdu6a76T+3Xyt+K571hupeFLg4=" crossorigin="anonymous" />
     <!-- datepicker -->
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.3.0/css/datepicker.css">
     <!-- Custom styles for this template -->
     <link href=" {% static '/css/style.css' %}" rel="stylesheet" />
     <!-- responsive style -->
     <link href=" {% static '/css/responsive.css' %}" rel="stylesheet" />
   

     <!-- for about slide design -->
      <!-- Bootstrap CSS -->
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
<!-- Swiper CSS -->
<link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
<!-- Boxicons CSS -->
<link href="https://unpkg.com/boxicons@2.1.2/css/boxicons.min.css" rel="stylesheet" />
<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">



     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

     <style>

      .body{
        font-family: 'Roboto', 'Open Sans', sans-serif;
        font-size: 14px;
        color: #333; /* Dark gray color */
        line-height: 1.6;
    }

      #offcanvas{
        background-color:#0a4e49";
      }

      {% comment %} .homeimg{
        height: 100vh;
        width: 103%;
        display: block; 
        object-fill:cover;
        align-items: center;
        background-image:linear-gradient(to top,rgb(5, 46, 65), 40%, transparent 60%),
        url("{% static '/images/paintingimg.jpeg' %}") ;
        background-size:cover; /* Light background image */
        background-position:center;
        backgroud-repeat:no-repeate; 
        color: transparent;
    }  {% endcomment %}

    {% comment %} .homeimg{
      width: 100%;
      object-fill:cover;
      align-items: center;
      background-image:linear-gradient(to top,rgb(6, 75, 49), 40%, transparent 60%),
      url("{% static '/images/eternal/alovela.jpeg' %}") ;
      background-size:cover; /* Light background image */
      background-position:center;
      backgroud-repeat:no-repeate; 
      color: transparent;
  }  {% endcomment %}

    
.homevideo {
    position: relative;
    width: 100%%;
    height: 80vh;
    margin: 0 auto; /* center horizontally */
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 12px; /* optional: rounded corners */
    box-shadow: 0 4px 20px rgba(0,0,0,0.3); /* optional: drop shadow */
}

.homevideo video {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    z-index: 1;
}

.homevideo .overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(to top, rgba(17, 88, 61, 1) 20%, transparent 50%);
    z-index: 2;
}

.homevideo #description {
    position: relative;
    z-index: 3;
    padding: 20px;
    color: #fff;
    text-align: center;
}

     {% comment %} .homefont{
    font-family: 'Ancola';
    src: url("{% static 'fonts/ancola_fonts/ancola-regular.otf' %}") format('truetype');
    font-weight: normal;
    font-style: normal;
} {% endcomment %}


    {% comment %} .homeimg{
      background-image: 
          linear-gradient(to left, black 60%, rgba(139, 69, 19, 0.5) 100%, transparent 40%),
          url("{% static '/images/paintingimg.jpeg' %}") ;
      color: transparent;
    }  {% endcomment %}


    #getservice{
      color:white;
      background-color:rgb(4, 70, 39);
      border:1px solid white;
      border-radius:20px;
      font-size:16px;
      padding-left:15px;
      padding-right:15px;
      padding-top:5px;
      padding-bottom:5px;
      /* border-left:1px solid rgb(241, 248, 248) ;
      box-shadow:0px 1px 2px white;  */
    }

    #getservice:hover{
      padding-left:16px;
      padding-right:16px;
      padding-top:5px;
      padding-bottom:5px;
    }

    .navbarbutton {
      color: #ffffff;
      border: 0;
      padding: 5px 0px;
      height: 35px;
      width: 40px;
      overflow: hidden;
      white-space: nowrap; 
      transition: all 0.8s ease;
      border-radius: 20px;
      display: inline-flex; 
      align-items: center;
      justify-content: center; 
      font-size: 1rem;
      position: relative;
    }
    
    .navbarbutton:hover {
      width: 150px; /* expand width on hover */
      padding: 5px 15px;
      background-color: #ffffff;
      color:rgb(4, 70, 39);
      cursor:pointer;
    }
    
    .navbarbutton:hover::after {
      content: attr(data-label);
      margin-left: 10px;
      color:rgb(4, 70, 39);
      cursor:pointer;
    } 

    .hometab{
      color:white;
      font-size: 1.3rem;
      transition: all 0.3s ease;
    }
    .hometab:hover{
      color:white;
      font-size: 1.5rem;
      cursor:pointer;
    }

    .adveradds{
      font-size:2rem;
      transition:all 0.5s ease;
      cursor:pointer;
    }

    .adveradds:hover{
      font-size:2.5rem;
      transition: all 0.5s ease;
      cursor:pointer;
    }

    #footer{
      width:100%%;
    }

    #socialbtn{
      font-size:1.5rem;
      transition: all 0.5s ease;
      cursor:pointer;
    }

    #socialbtn:hover{
      font-size:2rem;
      transition: all 0.5s ease;
      cursor:pointer;
    }

    .servicesdiv{
    display: flex;
    overflow-x: auto; /* Enable horizontal scrolling */
  }





    .top_providers{
      border-radius:30px;
    }

    #provider_category{
      background-color:rgb(219, 228, 231);
      border-radius:20px;
    }


    .nav-link{
      color:rgb(4, 70, 39);
      background-color:rgb(226, 240, 233);
    }

    .nav-link:hover{
      color:white;
      background-color:rgb(4, 70, 39);
    }

    .nav-link:active{
      color:white;
      background-color:rgb(4, 70, 39);
    }

    .categoryimg{
      border-radius:15px;
    }

    .form_img{
      width: 100%;
      background-image:url("{% static '/images/loginimg2.jpeg' %}") ;
      background-size:cover; /* Light background image */
      background-position:center;
      backgroud-repeat:no-repeate; 
      color: transparent;
      border-radius:25px;
    }

    .formbody{
      background: rgb(37, 85, 63);
      backdrop-filter: blur(15px);
      border-radius:25px;
      padding-top:70px;
      padding-bottom:70px;
    }

    .coverform{
      margin-left:100px;
      margin-right:100px;
    }

    {% comment %} .message{
      background-color:rgba(214, 220, 228, 0.32);
      padding:7px;
      color:white;
      display:flex;
      justify-content:center;
      align-items:center;
      border-radius: 10px;
      width:100%;
      margin:auto;
      text:center;
    } {% endcomment %}

    #category_title{
      border-left:3px solid rgb(4, 70, 65);
      background-color:rgb(226, 240, 233);
      transition: all 0.5s ease;
    }

    #category_title:hover{
      background-color:rgba(196, 221, 207, 1);
      border-left:3px solid rgba(131, 172, 168, 1);
      font-style:bold;
      cursor:pointer;
      transition: all 0.5s ease;
    }

     #category_container{
      background-color:rgb(226, 240, 233);
      transition: all 0.5s ease;
    }

    #category_container:hover{
      background-color:rgb(226, 240, 233);
      box-shadow: 0px 2px 3px 2px rgba(200, 204, 203, 1);
      font-style:bold;
      cursor:pointer;
      transition: all 0.5s ease;
    }

    #business_plan{
      background-color:rgb(226, 240, 233);
      transition: all 0.5s ease;
    }

    #business_plan:hover{
      background-color:rgb(226, 240, 233);
      box-shadow: 0px 2px 3px 2px rgba(200, 204, 203, 1);
      font-style:bold;
      cursor:pointer;
      transition: all 0.5s ease;
    }

    #business_levels{
      background-color:rgb(226, 240, 233);
      transition: all 0.5s ease;
    }

    #business_levels:hover{
      background-color:rgb(226, 240, 233);
      box-shadow: 0px 2px 3px 2px rgba(200, 204, 203, 1);
      font-style:bold;
      cursor:pointer;
      transition: all 0.5s ease;
    }


    #getservice{
      background-color:rgb(4, 70, 39);
      //font-size:1rem;
      font-style:bold;
      transition: all 0.5s ease;
    }

    #getservice:hover{
      background-color:rgba(22, 138, 84, 1);
      //font-size:1.1rem;
      font-style:bold;
      cursor:pointer;
      transition: all 0.5s ease;
    }

    #advertisment{
      background-color:rgb(4, 70, 39);
      font-style:bold;
      transition: all 0.5s ease;
    }

    #advertisment:hover{
      background-color:rgba(22, 138, 84, 1);
      font-style:bold;
      cursor:pointer;
      transition: all 0.5s ease;
    }

    #add_list{
       border-radius:25px; 
       color:rgb(4, 70, 39); 
       background-color:rgba(73, 150, 114, 1);
    }
      #add_list:hover{
       border-radius:25px; 
       color:white; 
       background-color:rgba(46, 94, 72, 1);
       cursor:pointer;
    }

      .image-box {
      width: 250px;
      height: 150px;
      overflow: hidden;
      border-radius:10px;
  }

  .image-box img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center;
  }
    
  .advertisementimg-box {
      width: 220px;
      height: 200px;
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
      border-radius:10px;
  }

  .advertisementimg-box img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center;
  }

  .profileimage-box {
      width: 90px;
      height: 90px;
      overflow: hidden;
      border-radius:10px;
  }

  .profileimage-box img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center;
  }

    .listimage-box {
      width: 40px;
      height: 40px;
      overflow: hidden;
      border-radius:10px;
  }

  .listimage-box img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center;
  }

  .adsimg-box {
      width: 150px;
      height: 100px;
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
      border-radius:10px;
  }

  .adsimg-box img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center;
  }


    .adsvideo-box {
      width: 150px;
      height: 100px;
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
      border-radius:10px;
  }

  .adsvideo-box img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center;
  }

      /* animation division div styling */
    .animation_division{
    }

    /* Class to trigger fade-in animation */
    .fade-in {
        animation: fadeIn 1s ease-in-out forwards;
    } 

    /* 
    animation: fadeIn 1.5s ease-in-out forwards;
    animation: fadeOut 1.5s ease-in-out forwards;
    */

   /*start animation for description  @keyframes slideFromBottom{
      from { transform: translateY(100px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
     .fade-in {
      animation: slideFromBottom 0.3s ease-out;
    }  
*/



     /*start animation for offcanvas */
    @keyframes slideDown {
      from {
        transform: translateY(-50px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    } 
     
    #offcanvas{
      animation: slideDown 1.3s ease-out;
    } 


  /* Slide and transilate */
    @keyframes slideIn {
      from { transform: translateX(-100px); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }


    /* Slide and transilate from right to left description */
    @keyframes slideFromRight{
      from { transform: translateX(100px); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
    #description {
      animation: slideFromRight 1.5s ease-out;
    }


    /* Slide and transilate from left to right getservice */
    @keyframes slideFromLeft{
      from { transform: translateX(-100px); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
    #getservice {
      animation: slideFromLeft 1.3s ease-out;
    }

      
    /* Slide and transilate from left to right advertisment */
    @keyframes slideFromLeft{
      from { transform: translateX(-100px); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
    #advertisment {
      animation: slideFromLeft 1.3s ease-out;
    }


  /* Slide and transilate from right to left */
@keyframes slideFromRight{
  from { transform: translateX(100px); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}
.servicesdiv {
  animation: slideFromRight 1.3s ease-out;
}


/* Slide and transilate from bottom to top */
@keyframes slideFromBottom{
  from { transform: translateY(100px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}
#footer, .footer_section {
  animation: slideFromBottom 1.3s ease-out;
}

      
    {% comment %} /*animation for  description*/
     @keyframes typing {
      from { width: 0 }
      to { width: 100% }
    }
    .description {
      overflow: hidden;
      white-space: nowrap;
      width: 0;
      animation: typing 5s steps(30, end) forwards;
    }  {% endcomment %}


    {% comment %} /*start animation for description */
    @keyframes slideFromBottom{
      from { transform: translateY(100px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    #footer, #description {
      animation: slideFromBottom 0.3s ease-out;
    } {% endcomment %}


</style>
</head>
<script>
	setTimeout(function() {
		var messages = document.querySelectorAll('.message');
		messages.forEach(function(message) {
			message.style.display = 'none';
		});
	}, 3000);
</script>



  <link rel="shortcut icon" type="image/x-icon" href="{% static 'images/clan_image2.jpg' %}">

      <body class="bg-white">

  <!-- Navbar -->
  <div class="d-flex justify-content-between align-items-center p-2 fixed-top w-100"
       id="offcanvas" style="background-color:rgb(4, 70, 39);">

    <span>
      <a class="text-light text-decoration-none align-items-end" style="font-size:1.5rem;" href="{% url 'home' %}">
        {% comment %} <i class="bi bi-amazon text-success bg-light p-1 mx-1" style="border-radius:35px; font-size:1rem"></i> {% endcomment %}
          <img  src="{% static 'images/eternal/logo.jpg' %}"  style="width:40px; height:40px; object-fit:cover; border-radius:30px;" >RNL
      </a>
    </span>

    <!-- notification messages -->
    {% if messages %}
      {% for message in messages %}
        <div class="d-flex justify-content-center align-items-center w-100 position-absolute" style="top:90px;">
          <span class="message py-1 px-3 text-center"
                style="color:#fff; border-radius:15px; background-color:rgba(25, 138, 85, 1);">
           <i class="bi bi-bell text-light mx-1 " style="font-size: 1rem"></i>  {{ message }}
          </span>
        </div>
      {% endfor %}
    {% endif %}
    <!-- end notification message -->

    <span class="p-1" style="background-color:rgb(6, 104, 58); border-radius:25px;">
      <span class="navbartabs text-decoration-none" id="navbartabs">
        {% if user.is_authenticated %}
          {% comment %} <a class="bi bi-basket-fill text-decoration-none ml-1 navbarbutton" data-label="Services" href="{% url 'services' %}"></a>
          <a class="bi bi-badge-ad-fill text-decoration-none ml-2 navbarbutton" data-label="Advertisment" href="{% url 'advertisement' %}"></a> {% endcomment %}
          <a class="bi bi-graph-up-arrow text-decoration-none ml-2 navbarbutton" data-label="Uchambuzi" href="{% url 'analysis' %}"></a>
          {% comment %} <a class="bi bi-currency-exchange text-decoration-none ml-2 navbarbutton" data-label="PV-Exchange"  ></a> {% endcomment %}
          <a class="bi bi-person-fill text-decoration-none ml-2 navbarbutton" data-label="Akaunti" href="{% url 'account' %}"  ></a>
          <a class="bi bi-arrow-left-circle text-decoration-none ml-2 navbarbutton" data-label="Toka" href="{% url 'logout' %}"></a>
        {% else %}
          {% comment %} <a class="bi bi-basket-fill text-decoration-none ml-1 navbarbutton" data-label="Services" href="{% url 'services' %}"></a>
          <a class="bi bi-badge-ad-fill text-decoration-none ml-2 navbarbutton" data-label="Advertisment" href="{% url 'advertisment' %}"></a> {% endcomment %}
          <a class="bi bi-graph-up-arrow text-decoration-none ml-2 navbarbutton" data-label="Uchambuzi" href="{% url 'analysis' %}"></a>
          {% comment %} <a class="bi bi-info-circle-fill text-decoration-none ml-2 navbarbutton" data-label="About"></a> {% endcomment %}
          {% comment %} <a class="bi bi-person-fill text-decoration-none ml-2 navbarbutton" data-label="Account" href="{% url 'admin_manage' %}" ></a> {% endcomment %}
          <a class="bi bi-arrow-right-circle text-decoration-none ml-2 navbarbutton" data-label="Ingia" href="{% url 'login' %}"></a>
          {% endif %}
      </span>
    </span>

  </div>
  <!-- End Navbar -->

  <!-- Main body -->
  {% block content %}
  {% endblock content %}

  <!-- Footer Info Section -->
  <section class="row p-4 m-0 w-100" id="footer" style="background-color:rgb(4, 70, 39);">
    <div class="col-sm">
      <h5 class="text-light text-center mb-3"><!-- ABOUT US --> KUTUHUSU</h5>
      <p class="text-light">
        Rose Nutrition Life hutoa elimu ya afya kuhusu lishe bora, kinga na udhibiti wa magonjwa sugu
         yasiyo ya kuambukiza kama vile kisukari, shinikizo la damu, na matatizo ya moyo. 
         Tunatoa mbinu mbadala na mwongozo wa kisayansi kupitia virutubisho na ushauri wa 
         mabadiliko ya maisha. Dhamira yetu ni kuboresha afya ya jamii, kuongeza uelewa, 
         na kuwawezesha wanachama kupata kipato kupitia huduma na uuzaji wa bidhaa za afya.
      </p>
      <h5 class="text-light mt-3"><!-- CONTACT US --> MAWASILIANO </h5>
      <p class="text-light">
        <i class="bi bi-phone"></i> +225 765375657 | +225 767377559<br>
        <i class="bi bi-envelope"></i><!-- P.O.BOX 1002 --> S.L.P 1002 <br>
        <i class="bi bi-geo-alt"></i> Dar-es-Salaam<br>
        <i class="bi bi-envelope"></i> rosenutritionlife@gmail.com
      </p>
    </div>

    <div class="col-sm">
      <h5 class="text-light text-center mb-3"><!-- OUR SERVICES --> HUDUMA </h5>
      <p class="text-light">
        Tunatoa vipimo vya uchunguzi kwa gharama nafuu (30,000 TZS)
         vinavyosaidia kubaini mapema magonjwa sugu kama vile maradhi ya moyo,
          kisukari, na matatizo ya figo. Tiba zote zinapatikana, 
          zikiwa na lengo la kutatua chanzo cha tatizo hadi kupona kabisa.
           Kwa kujiunga na Rose Nutrition kama mwanachama, unafaidika na
            alama za bonasi zinazojulikana kama PV (Profit Value), 
            ambazo hukusanyika na kuwa alama za faida zinazokupatia kipato cha ziada
             sambamba na huduma bora za afya.
      </p>
    </div>

    <div class="col-sm">
      <h5 class="text-light text-center mb-3"><!--  OUR SOCIAL MEDIA--> MITANDAO YA KIJAMII </h5>
      <div class="d-flex justify-content-center align-items-center gap-3">
       <a data-bs-toggle="tooltip" title="rosenutritionlife"  class="text-decoration-none" style="cursor:pointer;"><i class="bi bi-instagram text-light" style="font-size:1.8rem"></i></a>
        <a data-bs-toggle="tooltip" title="rosenutritionlife"  class="text-decoration-none" style="cursor:pointer;"><i class="bi bi-facebook text-light" style="font-size:1.8rem"></i></a>
        <a data-bs-toggle="tooltip" title="rosenutritionlife" class="text-decoration-none" style="cursor:pointer;"><i class="bi bi-tiktok text-light" style="font-size:1.8rem"></i></a>
        <a data-bs-toggle="tooltip" title="rosenutrtionlife" href="https://www.youtube.com/rosenutritionlife" class="text-decoration-none" style="cursor:pointer;"><i class="bi bi-youtube text-light" style="font-size:2.5rem"></i></a>
    </div>
  </section>
  <!-- End Footer Info -->

  <!-- Footer Section -->
  <footer class="footer_section w-100" style="background-color:rgb(4, 70, 39);">
    <hr class="mt-0 border border-light">
    <div class="container text-center text-light">
        <b class="text-lowercase">rosenutritionlife</b><br>
        &copy; <span id="displayYear"></span> All Rights Reserved<br>
        <span class="text-light">Developed By peterprogrammer (+255 617999099)</span>
    </div>
  </footer>

   
</section>


{% comment %} <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> {% endcomment %}

  <!-- Bootstrap JS and Dependencies -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <!-- footer section -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <!-- jQery -->
  <script src="{% static 'js/jquery-3.4.1.min.js' %}"></script>
  <!-- bootstrap js -->
  <script src="{% static 'js/bootstrap.js' %}"></script>
  <!-- nice select -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-nice-select/1.1.0/js/jquery.nice-select.min.js" integrity="sha256-Zr3vByTlMGQhvMfgkQ5BtWRSKBGa2QlspKYJnkjZTmo=" crossorigin="anonymous"></script>
  <!-- owl slider -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
  <!-- datepicker -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.3.0/js/bootstrap-datepicker.js"></script>
  <!-- custom js -->
  <script src="{% static 'js/custom.js' %}"></script>
  
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>




  <!-- Start Make Javascript fussions -->
  <script>
    const navbarbutton = document.querySelector('.navbarbutton');
    const navbartabs = document.getElementById('navbartabs');
  
    navbarbutton.addEventListener('click', () => {
      navbartabs.classList.toggle('active');
      navbarbutton.focus();
    });
  </script>


<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
$(document).ready(function() {
  let charts = {};

  function loadChart(type, canvasId) {
    $.ajax({
      url: `/ajax/show_chart/${type}/`,
      type: 'GET',
      success: function(response) {
        const ctx = document.getElementById(canvasId).getContext('2d');

        if (charts[canvasId]) charts[canvasId].destroy(); // destroy old chart

        if (type === 'linechart') {
          charts[canvasId] = new Chart(ctx, {
            type: 'line',
            data: {
              labels: response.models,
              datasets: [{
                label: 'Total Records',
                data: response.ids,
                borderColor: '#2e7d32',
                backgroundColor: 'rgba(46,139,87,0.2)',
                fill: true,
                tension: 0.4
              }]
            },
            options: { responsive: true, maintainAspectRatio: false }
          });
        }

        else if (type === 'bargraph') {
          charts[canvasId] = new Chart(ctx, {
            type: 'bar',
            data: {
              labels: response.models,
              datasets: [{
                label: 'Total Records',
                data: response.ids,
                backgroundColor: '#2e7d32'
              }]
            },
            options: { responsive: true, maintainAspectRatio: false }
          });
        }

        else if (type === 'stackgraph') {
          charts[canvasId] = new Chart(ctx, {
            type: 'bar',
            data: {
              labels: response.models,
              datasets: [
                { label: 'Male', data: response.stack_data.male, backgroundColor: '#2e7d32' },
                { label: 'Female', data: response.stack_data.female, backgroundColor: '#864058ff' }
              ]
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              scales: { x: { stacked: true }, y: { stacked: true } }
            }
          });
        }

         // Population chart
        else if (type === 'populationchart') {
          const labels = response.population.labels;
          const data = response.population.ages;
          const bgColors = response.population.genders.map(g => g === 'M' ? '#2e7d32' : '#f06292');

          charts[canvasId] = new Chart(ctx, {
            type: 'bar',
            data: {
              labels: labels,
              datasets: [{
                label: 'Age Distribution',
                data: data,
                backgroundColor: bgColors
              }]
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              scales: {
                x: { title: { display: true, text: 'Patient ID' } },
                y: { title: { display: true, text: 'Age' } }
              }
            }
          });
        }


        else if (type === 'piechart') {
          charts[canvasId] = new Chart(ctx, {
            type: 'pie',
            data: {
              labels: response.models,
              datasets: [{
                data: response.pie_data,
                backgroundColor: ['#2e7d32', '#253826ff', '#3f7c7eff', '#50631cff']
              }]
            },
            options: { responsive: true, maintainAspectRatio: false }
          });
        }
      },
      error: function(xhr) {
        console.error('Error loading chart data:', xhr.statusText);
      }
    });
  }

  // Load all charts when page is ready
  loadChart('linechart', 'lineChartResponsive');
  loadChart('bargraph', 'barChartResponsive');
  loadChart('stackgraph', 'stackedChartResponsive');
  loadChart('piechart', 'pieChartResponsive');
  loadChart('populationchart', 'populationChartResponsive');
});
</script>



    <script>
    const smallDiv = document.getElementById('scrollDiv');
    let hasFadedIn = false; // To ensure it fades only once

    const smallDiv2 = document.getElementById('scrollDiv2');
    let hasFadedIn2 = false; // To ensure it fades only once

    const smallDiv3 = document.getElementById('scrollDiv3');
    let hasFadedIn3 = false; // To ensure it fades only once

    const smallDiv4 = document.getElementById('scrollDiv4');
    let hasFadedIn4 = false; // To ensure it fades only once

    const smallDiv5 = document.getElementById('scrollDiv5');
    let hasFadedIn5 = false; // To ensure it fades only once


    window.addEventListener('scroll', () => {
        if (!hasFadedIn && window.scrollY > 200) { // Trigger after 100px scroll
            smallDiv.classList.add('fade-in');
            hasFadedIn = true; // Prevent further fade-ins
        }
        if (!hasFadedIn2 && window.scrollY > 1300) { // Trigger after 100px scroll
            smallDiv2.classList.add('fade-in');
            hasFadedIn2 = true; // Prevent further fade-ins
        }
        if (!hasFadedIn3 && window.scrollY > 1700) { // Trigger after 100px scroll
            smallDiv3.classList.add('fade-in');
            hasFadedIn3 = true; // Prevent further fade-ins
        }
        if (!hasFadedIn4 && window.scrollY > 2100) { // Trigger after 100px scroll
            smallDiv4.classList.add('fade-in');
            hasFadedIn4 = true; // Prevent further fade-ins
        }
        if (!hasFadedIn5 && window.scrollY > 2500) { // Trigger after 100px scroll
            smallDiv5.classList.add('fade-in');
            hasFadedIn5 = true; // Prevent further fade-ins
        }
    });
</script>



    <!-- GENERAL STARTING POSTING FORMS -->
    <!-- start post disease -->
     <script>
$(document).ready(function() {
    function getCookie(name) {
        var cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            var cookies = document.cookie.split(';');
            for (var i = 0; i < cookies.length; i++) {
                var cookie = cookies[i].trim();
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }
    var csrftoken = getCookie('csrftoken');

    // Show disease post modal
    $(document).on('click', '.disease-post-btn', function() {
        $.ajax({
            url: `/post_disease/`,   // this loads the form page
            method: 'GET',
            success: function(response) {
                $('body').append(response);
                $('#diseasePostModal').modal('show');
                // Remove modal from DOM when hidden to avoid duplicate IDs
                $('#diseasePostModal').on('hidden.bs.modal', function() {
                    $(this).remove();
                });
            },
            error: function(xhr, status, error) {
                alert('An error occurred while loading disease form.');
            }
        });
    });

    // Handle posting disease form
    $(document).on('click', '#postdisease_button', function() {
        var button = $(this);
        var form = $('#postdiseaseForm')[0];
        var formData = new FormData(form);

        // Disable button to prevent multiple submissions
        button.prop('disabled', true);

        $.ajax({
            url: $(form).attr('action'),
            method: 'POST',
            data: formData,
            processData: false,
            contentType: false,
            headers: {
                'X-CSRFToken': csrftoken
            },
            success: function(response) {
                $('#diseasePostModal').modal('hide');
                button.prop('disabled', false);
                location.reload(); // Refresh page to show new disease
            },
            error: function(xhr) {
                button.prop('disabled', false); // re-enable button
                if (xhr.status === 400) {
                    alert('You have already posted this disease.');
                } else {
                    alert('An error occurred while posting the disease.');
                }
            }
        });
    });
});
</script>



<!-- start general post -->
 <script>
$(document).ready(function() {
    // CSRF helper
    function getCookie(name) {
        var cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            var cookies = document.cookie.split(';');
            for (var i = 0; i < cookies.length; i++) {
                var cookie = cookies[i].trim();
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }
    var csrftoken = getCookie('csrftoken');

    // ---------------- Generic function to show modal ----------------
    function showModal(buttonClass, url, modalId) {
        $(document).on('click', buttonClass, function() {
            $.ajax({
                url: url,
                method: 'GET',
                success: function(response) {
                    $('body').append(response);
                    $(modalId).modal('show');
                    $(modalId).on('hidden.bs.modal', function() {
                        $(this).remove();
                    });
                },
                error: function() {
                    alert('An error occurred while loading the form.');
                }
            });
        });
    }

    // ---------------- Generic function to post form ----------------
    function postForm(buttonId, formId, modalId) {
        $(document).on('click', buttonId, function() {
            var button = $(this);
            var form = $(formId)[0];
            var formData = new FormData(form);
            button.prop('disabled', true);

            $.ajax({
                url: $(form).attr('action'),
                method: 'POST',
                data: formData,
                processData: false,
                contentType: false,
                headers: { 'X-CSRFToken': csrftoken },
                success: function(response) {
                    $(modalId).modal('hide');
                    button.prop('disabled', false);
                    location.reload(); // Refresh page to show new entry
                },
                error: function(xhr) {
                    button.prop('disabled', false);
                    if (xhr.status === 400) {
                        alert('You have already posted this entry.');
                    } else {
                        alert('An error occurred while posting the form.');
                    }
                }
            });
        });
    }

    // ---------------- Initialize Modals and Form Posts ----------------
    showModal('.disease-post-btn', '/post_disease/', '#diseaseModal');
    postForm('#postdisease_button', '#diseaseForm', '#diseaseModal');

    showModal('.medicine-post-btn', '/post_medicine/', '#medicineModal');
    postForm('#postmedicine_button', '#medicineForm', '#medicineModal');

    showModal('.checkup-post-btn', '/post_checkup/', '#checkupModal');
    postForm('#postcheckup_button', '#checkupForm', '#checkupModal');

    showModal('.businessplan-post-btn', '/post_businessplan/', '#businessplanModal');
    postForm('#postbusinessplan_button', '#businessplanForm', '#businessplanModal');

    showModal('.businessplevel-post-btn', '/post_businesslevel/', '#businesslevelModal');
    postForm('#postbusinesslevel_button', '#businesslevelForm', '#businesslevelModal');

    showModal('.advertisement-post-btn', '/post_advertisement/', '#advertisementModal');
    postForm('#postadvertisement_button', '#advertisementForm', '#advertisementModal');

    showModal('.shop-post-btn', '/post_shop/', '#shopModal');
    postForm('#postshop_button', '#shopForm', '#shopModal');

    showModal('.meeting-post-btn', '/post_meeting/', '#meetingModal');
    postForm('#postmeeting_button', '#meetingForm', '#meetingModal');

    showModal('.branch-post-btn', '/post_branch/', '#branchModal');
    postForm('#postbranch_button', '#branchForm', '#branchModal');

    showModal('.patient-post-btn', '/post_patient/', '#patientModal');
    postForm('#postpatient_button', '#patientForm', '#patientModal');

    showModal('.checkup-sales-post-btn', '/post_checkup_sales/', '#checkupsalesModal');
    postForm('#postcheckupsales_button', '#checkupsalesForm', '#checkupsalesModal');

    showModal('.medicine-sales-post-btn', '/post_medicine_sales/', '#medicinesalesModal');
    postForm('#postmedicinesales_button', '#medicinesalesForm', '#medicinesalesModal');

    showModal('.about-post-btn', '/post_about/', '#aboutModal');
    postForm('#postabout_button', '#aboutForm', '#aboutModal');

});



//for postures Modals
$(document).ready(function() {
  // ---------- CSRF Helper ----------
  function getCookie(name) {
      let cookieValue = null;
      if (document.cookie && document.cookie !== '') {
          const cookies = document.cookie.split(';');
          for (let i = 0; i < cookies.length; i++) {
              const cookie = cookies[i].trim();
              if (cookie.substring(0, name.length + 1) === (name + '=')) {
                  cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                  break;
              }
          }
      }
      return cookieValue;
  }
  const csrftoken = getCookie('csrftoken');

  // ---------- Click Event ----------
  $(document).on('click', '.btn-posture', function() {
      const id = $(this).data('id');
      const type = $(this).data('type');
      const url = `/ajax/posture-details/${type}/${id}/`;

      $.ajax({
          url: url,
          type: 'GET',
          success: function(response) {
              $('body').append(response);  // append the modal HTML
              $('#postureModal').modal('show');
              $('#postureModal').on('hidden.bs.modal', function() {
                  $(this).remove(); // remove modal from DOM when closed
              });
          },
          error: function(xhr) {
              alert('An error occurred: ' + xhr.statusText);
          }
      });
  });

});



//for videos Modals
$(document).ready(function() {
  // ---------- CSRF Helper ----------
  function getCookie(name) {
      let cookieValue = null;
      if (document.cookie && document.cookie !== '') {
          const cookies = document.cookie.split(';');
          for (let i = 0; i < cookies.length; i++) {
              const cookie = cookies[i].trim();
              if (cookie.substring(0, name.length + 1) === (name + '=')) {
                  cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                  break;
              }
          }
      }
      return cookieValue;
  }
  const csrftoken = getCookie('csrftoken');

  // ---------- Click Event ----------
  $(document).on('click', '.btn-video', function() {
      const id = $(this).data('id');
      const type = $(this).data('type');
      const url = `/ajax/video-details/${type}/${id}/`;

      $.ajax({
          url: url,
          type: 'GET',
          success: function(response) {
              $('body').append(response);  // append the modal HTML
              $('#videoModal').modal('show');
              $('#videoModal').on('hidden.bs.modal', function() {
                  $(this).remove(); // remove modal from DOM when closed
              });
          },
          error: function(xhr) {
              alert('An error occurred: ' + xhr.statusText);
          }
      });
  });
});


//for lists Modals
$(document).ready(function() {
  // ---------- CSRF Helper ----------
  function getCookie(name) {
      let cookieValue = null;
      if (document.cookie && document.cookie !== '') {
          const cookies = document.cookie.split(';');
          for (let i = 0; i < cookies.length; i++) {
              const cookie = cookies[i].trim();
              if (cookie.substring(0, name.length + 1) === (name + '=')) {
                  cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                  break;
              }
          }
      }
      return cookieValue;
  }
  const csrftoken = getCookie('csrftoken');

  // ---------- Click Event ----------
  $(document).on('click', '.btn-lists', function() {
      const type = $(this).data('type');
      const url = `/ajax/lists-details/${type}/`;

      $.ajax({
          url: url,
          type: 'GET',
          success: function(response) {
              $('body').append(response);  // append the modal HTML
              $('#listModal').modal('hide');
              $('#listsModal').modal('show');
              $('#listsModal').on('hidden.bs.modal', function() {
                  $(this).remove(); // remove modal from DOM when closed
              });
          },
          error: function(xhr) {
              alert('An error occurred: ' + xhr.statusText);
          }
      });
  });
});




//for list Modals
$(document).ready(function() {
  // ---------- CSRF Helper ----------
  function getCookie(name) {
      let cookieValue = null;
      if (document.cookie && document.cookie !== '') {
          const cookies = document.cookie.split(';');
          for (let i = 0; i < cookies.length; i++) {
              const cookie = cookies[i].trim();
              if (cookie.substring(0, name.length + 1) === (name + '=')) {
                  cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                  break;
              }
          }
      }
      return cookieValue;
  }
  const csrftoken = getCookie('csrftoken');

  // ---------- Click Event ----------
  $(document).on('click', '.btn-list', function() {
      const id = $(this).data('id');
      const type = $(this).data('type');
      const url = `/ajax/list-details/${type}/${id}/`;

      $.ajax({
          url: url,
          type: 'GET',
          success: function(response) {
              $('body').append(response);  // append the modal HTML
              $('#listsModal').modal('hide');
              $('#listModal').modal('show');
              $('#listModal').on('hidden.bs.modal', function() {
                  $(this).remove(); // remove modal from DOM when closed
              });
          },
          error: function(xhr) {
              alert('An error occurred: ' + xhr.statusText);
          }
      });
  });
});



//for business Modals
$(document).ready(function() {
  // ---------- CSRF Helper ----------
  function getCookie(name) {
      let cookieValue = null;
      if (document.cookie && document.cookie !== '') {
          const cookies = document.cookie.split(';');
          for (let i = 0; i < cookies.length; i++) {
              const cookie = cookies[i].trim();
              if (cookie.substring(0, name.length + 1) === (name + '=')) {
                  cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                  break;
              }
          }
      }
      return cookieValue;
  }
  const csrftoken = getCookie('csrftoken');

  // ---------- Click Event ----------
  $(document).on('click', '.btn-business', function() {
      const id = $(this).data('id');
      const type = $(this).data('type');
      const url = `/ajax/business-details/${type}/${id}/`;

      $.ajax({
          url: url,
          type: 'GET',
          success: function(response) {
              $('body').append(response);  // append the modal HTML
              $('#businessModal').modal('show');
              $('#businessModal').on('hidden.bs.modal', function() {
                  $(this).remove(); // remove modal from DOM when closed
              });
          },
          error: function(xhr) {
              alert('An error occurred: ' + xhr.statusText);
          }
      });
  });
});

//for advertisement Modals
$(document).ready(function() {
  // ---------- CSRF Helper ----------
  function getCookie(name) {
      let cookieValue = null;
      if (document.cookie && document.cookie !== '') {
          const cookies = document.cookie.split(';');
          for (let i = 0; i < cookies.length; i++) {
              const cookie = cookies[i].trim();
              if (cookie.substring(0, name.length + 1) === (name + '=')) {
                  cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                  break;
              }
          }
      }
      return cookieValue;
  }
  const csrftoken = getCookie('csrftoken');

  // ---------- Click Event ----------
  $(document).on('click', '.btn-advertisement', function() {
      const type = $(this).data('type');
      const url = `/ajax/advertisement-details/${type}/`;

      $.ajax({
          url: url,
          type: 'GET',
          success: function(response) {
              $('body').append(response);  // append the modal HTML
              $('#advertisementModal').modal('hide');
              $('#advertisementModal').modal('show');
              $('#advertisementModal').on('hidden.bs.modal', function() {
                  $(this).remove(); // remove modal from DOM when closed
              });
          },
          error: function(xhr) {
              alert('An error occurred: ' + xhr.statusText);
          }
      });
  });
});


//for adslist Modals
$(document).ready(function() {
  // ---------- CSRF Helper ----------
  function getCookie(name) {
      let cookieValue = null;
      if (document.cookie && document.cookie !== '') {
          const cookies = document.cookie.split(';');
          for (let i = 0; i < cookies.length; i++) {
              const cookie = cookies[i].trim();
              if (cookie.substring(0, name.length + 1) === (name + '=')) {
                  cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                  break;
              }
          }
      }
      return cookieValue;
  }
  const csrftoken = getCookie('csrftoken');

  // ---------- Click Event ----------
  $(document).on('click', '.btn-adstable', function() {
      const type = $(this).data('type');
      const url = `/ajax/advertisement-tables/${type}/`;

      $.ajax({
          url: url,
          type: 'GET',
          success: function(response) {
              $('body').append(response);  // append the modal HTML
              $('#advertisementtablesModal').modal('show');
              $('#advertisementtablesModal').on('hidden.bs.modal', function() {
                  $(this).remove(); // remove modal from DOM when closed
              });
          },
          error: function(xhr) {
              alert('An error occurred: ' + xhr.statusText);
          }
      });
  });
});


//start edit and delete Modals
$(document).ready(function() {

    // ---------------------- CSRF Helper ----------------------
    function getCookie(name) {
        var cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            var cookies = document.cookie.split(';');
            for (var i = 0; i < cookies.length; i++) {
                var cookie = cookies[i].trim();
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }
    const csrftoken = getCookie('csrftoken');

    // ---------------------- Generic Modal Loader ----------------------
    function showModal(buttonClass) {
        $(document).on('click', buttonClass, function(e) {
            e.preventDefault(); // Stop normal navigation
            e.stopPropagation();

            const button = $(this);
            const url = button.data('url');
            const modalId = button.data('target');

            // Optional: remove any old modals to avoid duplicates
            $(modalId).remove();

            $.ajax({
                url: url,
                method: 'GET',
                success: function(response) {
                    // Append the returned modal HTML to the page body
                    $('body').append(response);

                    // Show modal
                    $(modalId).modal('show');

                    // Remove modal when hidden to prevent duplicates
                    $(modalId).on('hidden.bs.modal', function() {
                        $(this).remove();
                    });
                },
                error: function(xhr) {
                    console.error('Modal load failed:', xhr.statusText);
                    alert('Failed to load form. Please try again.');
                }
            });
        });
    }

    // ---------------------- Generic Form Submit ----------------------
    function handleFormSubmit(buttonClass) {
        $(document).on('click', buttonClass, function(e) {
            e.preventDefault();
            e.stopPropagation();

            const button = $(this);
            const formSelector = button.data('form');
            const modalSelector = button.data('modal');
            const form = $(formSelector)[0];
            const formData = new FormData(form);

            button.prop('disabled', true);

            $.ajax({
                url: $(form).attr('action'),
                method: 'POST',
                data: formData,
                processData: false,
                contentType: false,
                headers: { 'X-CSRFToken': csrftoken },
                success: function() {
                    $(modalSelector).modal('hide');
                    button.prop('disabled', false);
                    location.reload(); // reload after success
                },
                error: function(xhr) {
                    button.prop('disabled', false);
                    if (xhr.status === 403) {
                        alert('Permission denied.');
                    } else {
                        alert('Error submitting form. Try again.');
                    }
                }
            });
        });
    }

    // ---------------------- Initialize All ----------------------
    showModal('.generic-edit-btn');
    showModal('.generic-delete-btn');
    handleFormSubmit('.submit-edit-btn');
    handleFormSubmit('.submit-delete-btn');
});




//start edit and delete Modals
$(document).ready(function() {

    // ---------------------- CSRF Helper ----------------------
    function getCookie(name) {
        var cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            var cookies = document.cookie.split(';');
            for (var i = 0; i < cookies.length; i++) {
                var cookie = cookies[i].trim();
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }
    const csrftoken = getCookie('csrftoken');

    // ---------------------- Generic Modal Loader ----------------------
    function showModal(buttonClass) {
        $(document).on('click', buttonClass, function(e) {
            e.preventDefault(); // Stop normal navigation
            e.stopPropagation();

            const button = $(this);
            const url = button.data('url');
            const modalId = button.data('target');

            // Optional: remove any old modals to avoid duplicates
            $(modalId).remove();

            $.ajax({
                url: url,
                method: 'GET',
                success: function(response) {
                    // Append the returned modal HTML to the page body
                    $('body').append(response);

                    // Show modal
                    $(modalId).modal('show');

                    // Remove modal when hidden to prevent duplicates
                    $(modalId).on('hidden.bs.modal', function() {
                        $(this).remove();
                    });
                },
                error: function(xhr) {
                    console.error('Modal load failed:', xhr.statusText);
                    alert('Failed to load form. Please try again.');
                }
            });
        });
    }

    // ---------------------- Generic Form Submit ----------------------
    function handleFormSubmit(buttonClass) {
        $(document).on('click', buttonClass, function(e) {
            e.preventDefault();
            e.stopPropagation();

            const button = $(this);
            const formSelector = button.data('form');
            const modalSelector = button.data('modal');
            const form = $(formSelector)[0];
            const formData = new FormData(form);

            button.prop('disabled', true);

            $.ajax({
                url: $(form).attr('action'),
                method: 'POST',
                data: formData,
                processData: false,
                contentType: false,
                headers: { 'X-CSRFToken': csrftoken },
                success: function() {
                    $(modalSelector).modal('hide');
                    button.prop('disabled', false);
                    location.reload(); // reload after success
                },
                error: function(xhr) {
                    button.prop('disabled', false);
                    if (xhr.status === 403) {
                        alert('Permission denied.');
                    } else {
                        alert('Error submitting form. Try again.');
                    }
                }
            });
        });
    }

    // ---------------------- Initialize All ----------------------
    showModal('.user-edit-btn');
    showModal('.user-delete-btn');
    handleFormSubmit('.usersubmit-edit-btn');
    handleFormSubmit('.usersubmit-delete-btn');
});



//starting prints for excel,csv and pdf
$(document).on('click', '.export-btn', function(e) {
    e.preventDefault();
    const model = $(this).data('model');
    const format = $(this).data('format');

    $.ajax({
        url: `/export/${model}/${format}/`,
        method: 'GET',
        xhrFields: { responseType: 'blob' }, // handle file
        success: function(data, status, xhr) {
            const blob = new Blob([data]);
            const link = document.createElement('a');
            link.href = window.URL.createObjectURL(blob);
            link.download = xhr.getResponseHeader('Content-Disposition')
                .split('filename=')[1].replace(/"/g, '');
            link.click();
        },
        error: function(xhr) {
            if (xhr.status === 403) {
                alert("You don't have permission to export this data.");
            } else {
                alert('Error exporting data. Try again.');
            }
        }
    });
});



// Javascripts Codes
function shareContent(type,id) {
    //  Create a clean, SEO-friendly slug
    const cleanName = name.replace(/\s+/g, '').replace(/[^a-zA-Z0-9]/g, '');
    const baseUrl = 'http://127.0.0.1:9000/sharedcontent';
    const shareUrl = `${baseUrl}/${type}/${id}`;
    //const shareUrl = `${baseUrl}/${type}/${id}${cleanName}`;

    const title = `${type === 'song' ? 'Listen to this song' : 'Check out this album'}: ${name}`;

    if (navigator.share) {
        //  Native share (mobile + some desktop)
        navigator.share({
            title: title,
            url: shareUrl
        }).then(() => {
            console.log('Thanks for sharing!');
        }).catch((error) => {
            console.error('Error sharing:', error);
        });
    } else {
        //  Fallback popup for browsers without Web Share API
        const encodedUrl = encodeURIComponent(shareUrl);
        const encodedTitle = encodeURIComponent(title);

        const existingPopup = document.getElementById('share-popup');
        if (existingPopup) existingPopup.remove();

        const popupHTML = `
            <div id="share-popup" style="
                position: fixed; top: 0; left: 0; right: 0; bottom: 0;
                background: rgba(0, 0, 0, 0.4);
                display: flex; align-items: center; justify-content: center;
                z-index: 9999;">
                <div style="
                    background: #fff;
                    border-radius: 20px;
                    padding: 25px 20px;
                    text-align: center;
                    width: 320px;
                    box-shadow: 0 4px 20px rgba(0,0,0,0.2);
                    animation: fadeIn 0.3s ease;">
                   
                    <h5 style="color: #333; font-weight: 600; margin-bottom: 15px;">
                        Share <span style="color:#f17c90;">${name}</span>
                    </h5>

                    <div style="display: flex; flex-direction: column; gap: 10px;">
                        <a href="https://wa.me/?text=${encodedTitle}%20${encodedUrl}"
                           target="_blank"
                           style="background:#25D366; color:#fff; padding:8px; border-radius:12px; text-decoration:none;">
                           <i class="bi bi-whatsapp"></i> WhatsApp
                        </a>
                        <a href="https://www.facebook.com/sharer/sharer.php?u=${encodedUrl}"
                           target="_blank"
                           style="background:#1877f2; color:#fff; padding:8px; border-radius:12px; text-decoration:none;">
                           <i class="bi bi-facebook"></i> Facebook
                        </a>
                        <a href="https://twitter.com/intent/tweet?text=${encodedTitle}&url=${encodedUrl}"
                           target="_blank"
                           style="background:#000; color:#fff; padding:8px; border-radius:12px; text-decoration:none;">
                           <i class="bi bi-twitter-x"></i> X (Twitter)
                        </a>
                        <button onclick="copyToClipboard('${shareUrl}')"
                                style="background:#f17c90; color:#fff; border:none; padding:8px; border-radius:12px;">
                            <i class="bi bi-link-45deg"></i> Copy Link
                        </button>
                    </div>

                    <button onclick="document.getElementById('share-popup').remove()"
                            style="margin-top:15px; background:none; border:none; color:#888; font-size:14px;">
                        Close
                    </button>
                </div>
            </div>
        `;

        document.body.insertAdjacentHTML('beforeend', popupHTML);
    }
}

//  Copy link function
function copyToClipboard(text) {
    navigator.clipboard.writeText(text).then(() => {
        const btn = document.querySelector('#share-popup button[onclick^="copyToClipboard"]');
        if (btn) {
            btn.innerHTML = '<i class="bi bi-check-circle"></i> Copied!';
            btn.style.background = '#4caf50';
            setTimeout(() => {
                btn.innerHTML = '<i class="bi bi-link-45deg"></i> Copy Link';
                btn.style.background = '#f17c90';
            }, 2000);
        }
    }).catch(() => {
        alert('Unable to copy link.');
    });
}

//  Fade-in animation
const style = document.createElement('style');
style.textContent = `
@keyframes fadeIn {
  from {opacity: 0; transform: scale(0.9);}
  to {opacity: 1; transform: scale(1);}
}`;
document.head.appendChild(style);



//start delete comment
$(document).ready(function () {

    function getCookie(name) {
        let cookieValue = null;
        if (document.cookie !== "") {
            const cookies = document.cookie.split(";").map(c => c.trim());
            for (let cookie of cookies) {
                if (cookie.startsWith(name + "=")) {
                    cookieValue = decodeURIComponent(cookie.split("=")[1]);
                    break;
                }
            }
        }
        return cookieValue;
    }

    const csrftoken = getCookie("csrftoken");


    //  1. OPEN DELETE MODAL AND LOAD COMMENT DATA
    $(document).on("click", ".btn-deletecomment", function () {
        const url = $(this).data("url");

        $.ajax({
            url: url,
            method: "GET",
            success: function (res) {
                // Load HTML into modal container
                $("#deletecommentModal").remove();
                $("body").append(res.html);

                // Show modal
                $("#deletecommentModal").modal("show");
            },
            error: function () {
                alert("Failed to load delete modal.");
            }
        });
    });


    //  2. SUBMIT DELETE COMMENT
    $(document).on("click", ".submit-deletecomment-btn", function () {

        const deleteUrl = $("#deletecommentForm-url").val();

        $.ajax({
            url: deleteUrl,
            method: "POST",
            headers: { "X-CSRFToken": csrftoken },
            success: function (res) {
                if (res.success) {
                    $("#deletecommentModal").modal("hide");
                    location.reload();
                }
            },
            error: function () {
                alert("Delete failed.");
            }
        });

    });

});


//start able confirm and unconfirm comment
document.addEventListener("DOMContentLoaded", function() {

    document.addEventListener("click", function(e) {
        const btn = e.target.closest(".open-confirm-modal");
        if (!btn) return;

        const itemId = btn.dataset.id;
        const itemType = btn.dataset.type;
        const action = btn.dataset.action;
        const url = btn.dataset.url;

        // Fetch modal HTML
        fetch(`${url}?item_id=${itemId}&item_type=${itemType}&action=${action}`)
            .then(resp => resp.text())
            .then(html => {

                // Remove old modal if exists
                const oldModal = document.getElementById("confirmCommentModal");
                if (oldModal) oldModal.remove();

                // Insert new modal directly into body
                const tempDiv = document.createElement("div");
                tempDiv.innerHTML = html;
                document.body.appendChild(tempDiv);

                const modalEl = tempDiv.querySelector(".modal");

                // Initialize Bootstrap modal and show it
                const modal = new bootstrap.Modal(modalEl, {
                    backdrop: 'static', // prevent closing by clicking outside
                    keyboard: false     // prevent closing with ESC
                });
                modal.show();

                // Confirm button inside modal
                modalEl.querySelector("#modalConfirmBtn").addEventListener("click", function() {
                    const form = modalEl.querySelector("#confirmActionForm");
                    const formData = new FormData(form);

                    fetch(`/${action}/`, {
                        method: "POST",
                        body: formData,
                        headers: {"X-CSRFToken": getCookie("csrftoken")}
                    })
                    .then(r => r.json())
                    .then(data => {
                        if (data.status === "success") {
                            location.reload();
                        } else {
                            alert(data.message || "Action failed");
                        }
                    })
                    .catch(err => console.error(err));
                });

                // Remove modal from DOM after hiding
                modalEl.addEventListener("hidden.bs.modal", function() {
                    tempDiv.remove();
                });

            });
    });

    function getCookie(name) {
        let cookieValue = null;
        if (document.cookie) {
            document.cookie.split(";").forEach(cookie => {
                cookie = cookie.trim();
                if (cookie.startsWith(name + "=")) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                }
            });
        }
        return cookieValue;
    }
});




// start printing chart views images
document.addEventListener("DOMContentLoaded", function() {
  document.querySelectorAll(".print-chart-btn").forEach(button => {
    button.addEventListener("click", function() {
      const chartId = this.getAttribute("data-chart-id");
      const title = this.getAttribute("data-title");
      const description = this.getAttribute("data-description");
      const canvas = document.getElementById(chartId);

      if (!canvas) {
        alert("Chart not found!");
        return;
      }

      // Convert chart canvas to image (base64)
      const chartImage = canvas.toDataURL("image/png");

      // Send to Django view via AJAX
      fetch("{% url 'print_chart_pdf' %}", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "X-CSRFToken": getCookie("csrftoken"),
        },
        body: JSON.stringify({
          title: title,
          description: description,
          image: chartImage
        })
      })
      .then(response => {
        if (!response.ok) throw new Error("PDF generation failed.");
        return response.blob();
      })
      .then(blob => {
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = title + ".pdf";
        document.body.appendChild(a);
        a.click();
        a.remove();
      })
      .catch(error => {
        console.error(error);
        alert("Error creating PDF.");
      });
    });
  });

  // Get CSRF token helper
  function getCookie(name) {
    let cookieValue = null;
    if (document.cookie && document.cookie !== "") {
      const cookies = document.cookie.split(";");
      for (let i = 0; i < cookies.length; i++) {
        const cookie = cookies[i].trim();
        if (cookie.startsWith(name + "=")) {
          cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
          break;
        }
      }
    }
    return cookieValue;
  }
});





  //start post models comments
{% comment %}
 $(document).ready(function() {

  function getCookie(name) {
    var cookieValue = null;
    if (document.cookie && document.cookie !== '') {
      var cookies = document.cookie.split(';');
      for (var i = 0; i < cookies.length; i++) {
        var cookie = cookies[i].trim();
        if (cookie.substring(0, name.length + 1) === (name + '=')) {
          cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
          break;
        }
      }
    }
    return cookieValue;
  }
  const csrftoken = getCookie('csrftoken');

  function showModal(buttonClass) {
    $(document).on('click', buttonClass, function(e) {
      e.preventDefault();
      e.stopPropagation();
      const button = $(this);
      const url = button.data('url');
      const modalId = button.data('target');
      $(modalId).remove();
      $.ajax({
        url: url,
        method: 'GET',
        success: function(response) {
          $('body').append(response);
          $(modalId).modal('show');
          $(modalId).on('hidden.bs.modal', function() {
            $(this).remove();
          });
        },
        error: function(xhr) {
          console.error('Modal load failed:', xhr.statusText);
          alert('Failed to load modal.');
        }
      });
    });
  }

  function handleFormSubmit(buttonClass) {
    $(document).on('click', buttonClass, function(e) {
      e.preventDefault();
      e.stopPropagation();
      const button = $(this);
      const formSelector = button.data('form');
      const modalSelector = button.data('modal');
      const form = $(formSelector)[0];
      const formData = new FormData(form);
      button.prop('disabled', true);
      $.ajax({
        url: $(form).attr('action'),
        method: 'POST',
        data: formData,
        processData: false,
        contentType: false,
        headers: { 'X-CSRFToken': csrftoken },
        success: function() {
          $(modalSelector).modal('hide');
          button.prop('disabled', false);
          location.reload(); // refresh to see updates
        },
        error: function(xhr) {
          button.prop('disabled', false);
          if (xhr.status === 403) {
            alert('Permission denied.');
          } else {
            alert('Error submitting form.');
          }
        }
      });
    });
  }

  //  Initialize modal handlers
  showModal('.generic-postcomment-btn');
  showModal('.generic-deletecomment-btn');
  handleFormSubmit('.submit-postcomment-btn');
  handleFormSubmit('.submit-deletecomment-btn');
}); {% endcomment %}





//start showing graphs ( but codes doesn't able to show charts models ) 
{% comment %} function getCookie(name) {
  let cookieValue = null;
  if (document.cookie && document.cookie !== '') {
    const cookies = document.cookie.split(';');
    for (let i = 0; i < cookies.length; i++) {
      const cookie = cookies[i].trim();
      if (cookie.substring(0, name.length + 1) === (name + '=')) {
        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
        break;
      }
    }
  }
  return cookieValue;
}
const csrftoken = getCookie('csrftoken');

let chartInstance = null;

// Click handler for all chart buttons
$(document).on('click', '.btn-charts', function() {
  const type = $(this).data('type');
  const url = `/ajax/show_chart/${type}/`;

  $.ajax({
    url: url,
    type: 'GET',
    success: function(response) {
      const modal = new bootstrap.Modal(document.getElementById('chartModal'));
      modal.show();

      // Destroy existing chart if already shown
      if (chartInstance) chartInstance.destroy();
      const ctx = document.getElementById('dynamicChart').getContext('2d');

      // --- Chart Switch by Type ---
      if (type === 'linechart') {
        chartInstance = new Chart(ctx, {
          type: 'line',
          data: {
            labels: response.models,
            datasets: [{
              label: 'Total Records',
              data: response.ids,
              borderColor: '#2e8b57',
              backgroundColor: 'rgba(46,139,87,0.2)',
              fill: true,
              tension: 0.4
            }]
          },
          options: { responsive: true, maintainAspectRatio: false }
        });
      }
      else if (type === 'stackgraph') {
        chartInstance = new Chart(ctx, {
          type: 'bar',
          data: {
            labels: response.models,
            datasets: [
              { label: 'Male', data: response.stack_data.male, backgroundColor: '#4caf50' },
              { label: 'Female', data: response.stack_data.female, backgroundColor: '#f06292' }
            ]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: { x: { stacked: true }, y: { stacked: true } }
          }
        });
      }
      else if (type === 'piechart') {
        chartInstance = new Chart(ctx, {
          type: 'pie',
          data: {
            labels: response.models,
            datasets: [{
              data: response.pie_data,
              backgroundColor: ['#2e7d32', '#66bb6a', '#81c784', '#a5d6a7']
            }]
          },
          options: { responsive: true, maintainAspectRatio: false }
        });
      }
      else if (type === 'populationchart') {
        const ages = response.population.map(p => p.age);
        const genders = response.population.map(p => p.gender);
        const idsLabel = response.population.map(p => `ID-${p.id}`);

        chartInstance = new Chart(ctx, {
          type: 'bar',
          data: {
            labels: idsLabel,
            datasets: [{
              label: 'Age Distribution',
              data: ages,
              backgroundColor: genders.map(g => g === 'M' ? '#4caf50' : '#f06292')
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
              x: { title: { display: true, text: 'Patient ID' } },
              y: { title: { display: true, text: 'Age' } }
            }
          }
        });
      }
    },
    error: function(xhr) {
      alert('Error loading chart data: ' + xhr.statusText);
    }
  });
}); {% endcomment %}




</script>



<!-- show graphs with consant values of analysis -->
  <!-- for line graph -->
  <!-- minimal Chart.js setup (include Chart.js CDN before this script) -->
{% comment %} <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const ctx = document.getElementById('lineChartResponsive').getContext('2d');
  new Chart(ctx, {
    type: 'line',
    data: {
      labels: ['Mon','Tue','Wed','Thu','Fri'],
      datasets: [{
        label: 'Visitors',
        data: [120, 150, 90, 200, 170],
        fill: false,
        tension: 0.3
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false // allow canvas to match container height
    }
  });
</script>


<!-- for bar graph -->
<script>
  const ctxBarR = document.getElementById('barChartResponsive').getContext('2d');
  new Chart(ctxBarR, {
    type: 'bar',
    data: {
      labels: ['Red', 'Blue', 'Green', 'Yellow', 'Purple'],
      datasets: [{
        label: 'Votes',
        data: [12, 19, 3, 5, 2],
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false
    }
  });
  </script>

<!-- stack graph -->
<script>
  const ctxStackR = document.getElementById('stackedChartResponsive').getContext('2d');
  new Chart(ctxStackR, {
    type: 'bar',
    data: {
      labels: ['Q1', 'Q2', 'Q3', 'Q4'],
      datasets: [
        { label: 'Sales A', data: [50, 60, 70, 80] },
        { label: 'Sales B', data: [30, 40, 20, 50] }
      ]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      scales: {
        x: { stacked: true },
        y: { stacked: true }
      }
    }
  });
  </script>

  <!-- pie chart grpah -->
  <script>
    const ctxPieR = document.getElementById('pieChartResponsive').getContext('2d');
    new Chart(ctxPieR, {
      type: 'pie',
      data: {
        labels: ['Apple', 'Banana', 'Cherry'],
        datasets: [{
          data: [10, 20, 30]
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false
      }
    });
    </script> {% endcomment %}
    
</body>

</html>
