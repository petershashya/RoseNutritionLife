<div class="modal fade" id="DeleteMedicineAddModal" tabindex="-1">
  <div class="modal-dialog modal-xl modal-dialog-centered">
    <div class="modal-content">

      <form id="deleteMedicineAddForm"
            method="post"
            action="{% url 'delete_medicineadd' medicine_add.id %}">
        {% csrf_token %}

        <!-- HEADER -->
        <div class="modal-header">
          {% comment %} <h5 class="text-danger mb-0">
            Confirm Delete Medical Form
          </h5> {% endcomment %}
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>

        <!-- BODY -->
        <div class="modal-body">

          <!-- WARNING -->
          <div class="alert alert-danger">
            <strong>Warning!</strong>
            This action will permanently delete this medical form
            <u>and all its related medicine products</u>.
          </div>

          <!-- MEDICAL ADD INFO -->
          <table class="table table-bordered mb-4">
            <tr>
              <th width="30%">Member Name</th>
              <td>{{ medicine_add.member_name }}</td>
            </tr>
            <tr>
              <th>Membership No</th>
              <td>{{ medicine_add.membership_no }}</td>
            </tr>
            <tr>
              <th>Date Created</th>
              <td>{{ medicine_add.date_created|date:"d-m-Y H:i" }}</td>
            </tr>

            {% if medicine_add.patient_name %}
            <tr>
              <th>Patient Name</th>
              <td>{{ medicine_add.patient_name }}</td>
            </tr>
            <tr>
              <th>Patient Mobile</th>
              <td>{{ medicine_add.patient_mobile }}</td>
            </tr>
            {% endif %}
          </table>

          <!-- PRODUCTS LIST -->
          <h6 class="fw-bold mb-2">
            Related Medicine Products
          </h6>

          <div class="table-responsive">
            <table class="table table-striped table-hover table-sm">
              <thead class="table-light">
                <tr>
                  <th>#</th>
                  <th>Medicine</th>
                  <th class="text-center">Unit</th>
                  <th class="text-center">Cost</th>
                  <th class="text-center">Qty</th>
                  <th class="text-center">Total</th>
                </tr>
              </thead>
              <tbody>
                {% for p in products %}
                <tr>
                  <td>{{ forloop.counter }}</td>
                  <td>{{ p.medicine_name }}</td>
                  <td class="text-center">{{ p.medicine.unit }}</td>
                  <td class="text-center">
                    {{ p.medicine_cost|floatformat:2 }}
                  </td>
                  <td class="text-center">{{ p.qty }}</td>
                  <td class="text-center">
                    {{ p.medicine_totalcost|floatformat:2 }}
                  </td>
                </tr>
                {% empty %}
                <tr>
                  <td colspan="6" class="text-center text-muted">
                    No related products found
                  </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>

        </div>

        <!-- FOOTER -->
        <div class="modal-footer">
          <button type="button"
                  class="btn btn-secondary"
                  data-bs-dismiss="modal">
            Cancel
          </button>

          <button type="submit"
                id="confirmDeleteMedicineAdd"
                class="btn btn-danger">
          Delete Products
        </button>
        </div>

      </form>

    </div>
  </div>
</div>
