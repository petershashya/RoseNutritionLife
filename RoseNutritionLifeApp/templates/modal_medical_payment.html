<div class="modal fade" id="paymentModal" tabindex="-1">
  <div class="modal-dialog modal-xl">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header">
        <button type="button" class="btn btn-sm btn-outline-secondary btn-close" data-bs-dismiss="modal"></button>
      </div>

      <!-- Modal Body -->
      <div class="modal-body">

        <section class="book_section mb-2" id="details">
          <div class="container">

            <!-- Member / Patient Information -->
            <h5 class="mb-3 bg-success text-light p-2 rounded">Member & Patient Information</h5>

            <div class="table-responsive-sm">
              <table class="table table-bordered">
                <tr>
                  <th>Member Name</th>
                  <td>{{ member.user.first_name }} {{ member.user.last_name }}</td>
                </tr>
                <tr>
                  <th>Membership Number</th>
                  <td>{{ member.membership_no }}</td>
                </tr>
                <tr>
                  <th>Patient Name</th>
                  <td>{{ medical.name }}</td>
                </tr>
                <tr>
                  <th>Patient Mobile</th>
                  <td>{{ member.mobile_contact }}</td>
                </tr>
              </table>
            </div>


            <!-- Medicines -->
            <h5 class="mt-4">Selected Medicine Products</h5>

            <div class="table-responsive-sm">
              <table class="table table-striped table-hover">
                <thead>
                  <tr>
                    <th>Medicine</th>
                    <th>PV</th>
                    <th>Cost</th>
                    <th>Qty</th>
                    <th>Total Cost</th>
                    <th>Status</th>
                  </tr>
                </thead>
                <tbody>
                  {% for p in products %}
                  <tr data-product-id="{{ p.id }}">
                    <td class="text-start">{{ p.medicine_name }}</td>
                    <td class="text-center">{{ p.medicine_pv }}</td>
                    <td class="text-center">{{ p.medicine_cost }}</td>

                    <!-- Qty -->
                    <td>
                      <input
                        type="number"
                        class="form-control text-center qty-input"
                        min="1"
                        step="1"
                        value="{{ p.qty|default:'' }}"
                        {% if p.confirm_payment %}readonly{% endif %}
                      >
                    </td>
                    <!-- Total Cost -->
                    <td class="text-center total-cost">
                      {{ p.medicine_totalcost|default:"0" }}
                    </td>

                    <!-- Status -->
                    <td class="text-center">
                      {% if p.confirm_payment %}
                        <button class="btn btn-success btn-sm toggle-payment-btn"
                          data-id="{{ p.id }}" data-status="true">
                          Paid
                        </button>
                      {% else %}
                        <button class="btn btn-danger btn-sm toggle-payment-btn"
                          data-id="{{ p.id }}" data-status="false">
                          Pending
                        </button>
                      {% endif %}
                    </td>
                  </tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>

          </div>
        </section>

      </div> <!-- END modal-body -->

    </div> <!-- END modal-content -->
  </div> <!-- END modal-dialog -->
</div> <!-- END modal -->
